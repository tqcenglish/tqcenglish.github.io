title: 交叉编译
date: 2017-1-10
tags: golang
---

go 原声支持交叉编译，但是若代码中包含 c 语言，就需要考虑如下步骤了。

交叉编译 arm 版本
==============

若 golang 项目代码中包含 cgo 最好在目标平台编译。 若目标环境不支持需要使用正确的交叉编译工具。 对 arm 平台需要判断对应架构

* soft   : 不用fpu进行浮点计算，即使有fpu浮点运算单元也不用,而是使用软件模式。
* softfp : armel架构(对应的编译器为gcc-arm-linux-gnueabi)采用的默认值，用fpu计算，但是传参数用普通寄存器传，这样中断的时候，只需要保存普通寄存器，中断负荷小，但是参数需要转换成浮点的再计算。
* hard   : armhf架构(对应的编译器gcc-arm-linux-gnueabihf)采用的默认值，用fpu计算，传参数也用fpu中的浮点寄存器传，省去了转换, 性能最好，但是中断负荷高。

**OSX 安装教程编译器很麻烦**, 所以直接在 linux 下编译， 选择正确架构即可。